<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Omnibox/Status Bar Color for All Platforms -->
    <meta name="theme-color" content="#1e1b4b"> <!-- Chrome, Android, Opera -->
    <meta name="msapplication-navbutton-color" content="#1e1b4b"> <!-- Windows Phone -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Spacetime">

    <title>Spacetime: Visualizing the Fabric of Reality</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        /* Define a custom cursive font class */
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap');

        .cursive-title {
            font-family: 'Dancing Script', cursive;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a09;
            /* Deep Black for Space */
            color: #e2e8f0;
            line-height: 1.6;
        }

        h1 {
            font-size: larger;
            font-weight: bolder;
            transition: color 1s ease-in-out, text-shadow 0.5s ease-in-out;
        }

        h1:hover {
            color: #a58eeb;
            text-shadow: 0 0 1px #a78bfa, 0 0 15px #a78bfa;
        }

        h2 {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            transition: color 1s ease-in-out, text-shadow 0.5s ease-in-out;
        }

        h2:hover {
            color: #a58eeb;
            text-shadow: 0 0 1px #a78bfa, 0 0 15px #a78bfa;
        }

        h3 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #fff;
            border-bottom: 2px solid #a78bfa;
            padding-bottom: 0.5rem;
            letter-spacing: 0.02em;
            transition: color 1.2s cubic-bezier(.4, 0, .2, 1), border-color 0.6s cubic-bezier(.4, 0, .2, 1), text-shadow 0.7s cubic-bezier(.4, 0, .2, 1);
        }

        h3:hover {
            color: #eeeded;
            border-color: #f472b6;
            text-shadow: 0 0 8px #a78bfa, 0 0 16px #f472b6;
        }

        p {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            line-height: 1.6;
            color: #fffefe;
        }

        /* Initial state for the title (Centered, Large) */
        #site-title {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            /* Massive on desktop */
            z-index: 100;
            /* Smoother transition: 1s duration, ease-in-out curve for smooth return */
            transition: all 1s ease-in-out;
            padding: 0.5rem 1rem;
            text-shadow: 0 0 30px rgba(124, 58, 237, 0.9);
            /* Vibrant purple shadow */
            background-color: transparent;
            pointer-events: none;
            /* Allows clicks to pass through to the element below */
        }

        /* Final state for the title (Top Left, Small) */
        #site-title.scrolled {
            top: 1rem;
            left: 1.5rem;
            right: auto;
            transform: none;
            font-size: 2.25rem;
            /* text-3xl */
            box-shadow: none;
            background-color: transparent;
            padding: 0;
            text-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
            /* Subtle shadow when minimized */
        }

        /* Hero Section Styling and Starfield Container */
        .hero-space {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            /* Starfield gradient background */
            background: linear-gradient(180deg, #1e1b4b 0%, #0c0a09 100%);
            overflow: hidden;
            /* Important to hide stars outside the hero area */
        }

        /* --- Starfield CSS for Format Change --- */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            border-radius: 50%;
            background: #fff;
            width: 2px;
            height: 2px;
            will-change: opacity;
            opacity: 0.7;
            /* Default, overridden by JS for random brightness */
            animation: blinkStar 4s infinite;
            /* Slower animation by default */
        }

        .star.medium {
            background: #ffc;
            width: 3px;
            height: 3px;
            opacity: 1;
            animation-duration: 5s;
        }

        @keyframes blinkStar {
            0% {
                opacity: 0;
            }

            10% {
                opacity: 0.2;
            }

            20% {
                opacity: 0.7;
            }

            30% {
                opacity: 0.4;
            }

            40% {
                opacity: 0.9;
            }

            50% {
                opacity: 0;
            }

            60% {
                opacity: 0.8;
            }

            70% {
                opacity: 0.5;
            }

            80% {
                opacity: 1;
            }

            90% {
                opacity: 0.3;
            }

            100% {
                opacity: 0;
            }
        }


        #main-content {
            padding-top: 7rem;
            /* Adjust as needed for spacing below the title */
        }

        /* Smooth fade-in for sections */
        .fade-section {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s cubic-bezier(.4, 0, .2, 1), transform 0.8s cubic-bezier(.4, 0, .2, 1);
        }

        .fade-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Make sure navigation targets are not hidden under fixed elements */
        section { scroll-margin-top: 92px; }
        @media (max-width:720px){ section{ scroll-margin-top: 64px; } }

        /* Navigation button (top-left so it doesn't overlap the hero title) */
        /* Nav toggle (bottom-left) with improved animation */
        #nav-toggle { position: fixed; bottom: 16px; left: 16px; right: auto; z-index: 10003; width:56px; height:56px; border-radius:999px; background: linear-gradient(135deg,#7c3aed 0%, #6d28d9 100%); color:#fff; border:1px solid rgba(167,139,250,0.12); cursor:pointer; box-shadow: 0 18px 48px rgba(99,66,204,0.14); transition: transform 1.5s cubic-bezier(.2,.9,.2,1), box-shadow 2.5s ease, background 2s ease; display:flex; align-items:center; justify-content:center; font-size:20px; }
        #nav-toggle:hover{ transform: translateY(-2px) scale(1.05); box-shadow: 0 8px 40px rgba(127, 88, 255, 0.819); }
        #nav-toggle:focus{ outline: 3px solid rgba(124,58,237,0.18); outline-offset: 2px; }
        /* Click burst animation */
        /* Simplified: no popping animation — keep hover subtle and cool like index.html */
        /* Hover handled by #nav-toggle:hover rule (translateY + scale + box-shadow) */
        /* State when nav is open */
        #nav-toggle.open { transform: rotate(90deg) scale(1.04); box-shadow: 0 26px 68px rgba(99,66,204,0.18); }

        /* Overlay and panel */
        .nav-overlay{ position: fixed; inset:0; background: rgba(0,0,0,0.6); opacity:0; pointer-events:none; transition: opacity 220ms ease; z-index:10002; }
        .nav-overlay.visible{ opacity:1; pointer-events:auto; }
        .nav-panel{ position: fixed; top:0; left:0; height:100%; width: min(340px, 86vw); background: linear-gradient(180deg,#241233 0%, #081023 100%); border-right:1px solid rgba(124,58,237,0.10); box-shadow: 12px 0 80px rgba(20,8,40,0.9); transform: translateX(-110%); opacity:0; transition: transform 420ms cubic-bezier(.2,.9,.2,1), opacity 320ms ease; z-index:10005; padding:1rem; display:flex; flex-direction:column; }
        .nav-panel.open{ transform: translateX(0); opacity:1; }
       .nav-close{
            align-self:flex-end;
            background:transparent;
            border:none;
            color:#fff;
            font-size:18px;
            cursor:pointer;
            padding:6px;
            border-radius:6px;
            cursor: pointer;
            transition: transform 160ms ease, background 120ms ease, box-shadow 220ms ease, border-color 160ms ease;
            z-index: 10010;
        }
        .nav-close:hover{ transform: translateY(-2px) scale(1.03); background: rgba(255,255,255,0.04); box-shadow: 0 8px 24px rgba(7,9,29,0.6); border-color: rgba(124,58,237,0.12); }
        .nav-close:focus{ outline: 2px solid rgba(124,58,237,0.14); outline-offset: 2px; }
        /* Nav list: scrollable area with sticky footer reserved space */
        .nav-list{ list-style:none; padding:12px 8px; margin: 1rem 0; display:flex; flex-direction:column; gap:0.6rem; align-items:flex-start; flex:1 1 auto; max-height: calc(100vh - 220px); overflow-y:auto; -webkit-overflow-scrolling: touch; }
        .nav-list .nav-link{ color: #e6eefb; text-decoration:none; padding:0.6rem 0.9rem; border-radius:10px; display:inline-block; width:auto; transition: background .28s ease, color .28s ease, transform .3s cubic-bezier(.2,.9,.2,1), box-shadow .28s ease, text-decoration .28s ease; }
        /* Footer/pinned settings inside the panel */
        .nav-footer{ 
            border-top: 1px solid rgba(255,255,255,0.03); 
            padding: 12px; 
            display:flex; 
            justify-content:center; 
            gap:8px; 
            background: linear-gradient(180deg, transparent, rgba(0,0,0,0.05)); 
            position:sticky; 
            bottom:0; }
        .nav-footer .compact-btn{ background: transparent; border:1px solid rgba(255,255,255,0.04); padding:10px 5px; border-radius:12px; color: #e6eefb; cursor:pointer; transition: transform 520ms ease, box-shadow 1s ease, background 160ms ease; }

        .nav-footer .compact-btn:hover{ transform: translateY(-4px); box-shadow: 0 18px 40px rgba(176, 97, 255, 0.894); background: rgba(255,255,255,0.02); }
        @media (max-width:420px){ .nav-footer .compact-btn{ padding:14px 18px; font-size:1rem; } }

        /* Nav panel entrance/exit animations */
        /* Enhanced panel animation: slide + overshoot + gentle scale */
        @keyframes navPanelIn {
            0% { transform: translateX(-120%) scaleX(.96) skewX(-2deg); opacity: 0; filter: blur(2px); }
            60% { transform: translateX(8%) scaleX(1.02) skewX(0deg); opacity: 1; filter: blur(0); }
            100% { transform: translateX(0) scaleX(1); opacity: 1; }
        }
        @keyframes navPanelOut {
            0% { transform: translateX(0) scaleX(1); opacity:1; }
            70% { transform: translateX(-6%) scaleX(.99); opacity:0.6; }
            100% { transform: translateX(-120%) scaleX(.96); opacity:0; }
        }
        .nav-panel.open{ animation: navPanelIn 540ms cubic-bezier(.15,.85,.2,1) both; box-shadow: 24px 12px 120px rgba(10,6,30,0.85); }
        .nav-panel.closing{ animation: navPanelOut 420ms cubic-bezier(.2,.8,.2,1) both; }

        /* Nav link entrance — staggered using --i variable set in JS */
        .nav-list .nav-link{ opacity:0; transform: translateX(-8px) scale(.995); transform-origin: left center; }
        .nav-panel.open .nav-list .nav-link{ animation: navLinkIn 720ms cubic-bezier(.2,.9,.2,1) both; animation-delay: calc(var(--i,0) * 40ms); }
        @keyframes navLinkIn{ 0%{ opacity:0; transform: translateX(-10px) scale(.98);} 70%{ transform: translateX(4px) scale(1.008); } 100%{ opacity:1; transform: translateX(0) scale(1); } }

        /* Overlay fade smoothing */
        .nav-overlay{ position: fixed; inset:0; background: rgba(0,0,0,0.64); opacity:0; pointer-events:none; transition: opacity 320ms cubic-bezier(.2,.9,.2,1); z-index:10002; }
        .nav-overlay.visible{ opacity:1; pointer-events:auto; }

        /* Nav toggle button animation */
        #nav-toggle{ transition: transform 260ms cubic-bezier(.2,.9,.2,1), box-shadow 200ms ease; }

        /* Start (Begin Exploration) button started state */
        a#startLink.started{ opacity: 0.95; background: linear-gradient(135deg,#6d28d9 0%, #5b21b6 100%); pointer-events: auto; cursor: default; box-shadow: 0 10px 40px rgba(59,13,116,0.35); }
        a#startLink.started:hover{ transform: none; box-shadow: 0 10px 40px rgba(59,13,116,0.35); }

        /* removed extra pop keyframe — keep interactions simple */

        /* Mobile adjustments: full-screen panel and touch sized buttons */
        @media (max-width:720px){ .nav-panel{ width:100vw; left:0; right:0; } .nav-list{ max-height: calc(100vh - 220px); padding: 16px; } .nav-list .nav-link{ display:block; width:100%; padding:1rem 14px; font-size:1.02rem; }
        .nav-footer{ padding:14px 12px; }
        }
        .nav-list .nav-link:hover, .nav-list .nav-link:focus{ background: rgba(255,255,255,0.03); color:#e6eefb; outline:none; transform: translateX(12px) translateY(-4px) scale(1.05); text-shadow: 0 0 2px #79cbe9, 0 0 8px #5c8de9; box-shadow: 0 8px 24px rgba(0,0,0,0.2); text-decoration: underline; }

        /* Settings modal */
        .settings-modal{ position: fixed; left: 50%; top: 18%; transform: translate(-50%,-10%); width:min(420px, 92vw); background: linear-gradient(180deg,#071029,#071018); border-radius:12px; padding:0.6rem; border:1px solid rgba(255,255,255,0.04); box-shadow:0 18px 60px rgba(2,6,23,0.85); opacity:0; pointer-events:none; max-height:0; overflow:hidden; transition: transform 260ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease, max-height 260ms ease; z-index:10090; }
        .settings-header { cursor: grab; touch-action: none; -webkit-user-select: none; user-select: none; }
        .settings-header.dragging { cursor: grabbing; }
        .settings-modal.open{ box-shadow: 0 52px 120px rgba(2,6,23,0.95); border-color: rgba(124,58,237,0.12); transform: translate(-50%,0) scale(1); z-index:10095; }
        .settings-modal:focus-within{ box-shadow: 0 72px 160px rgba(2,6,23,0.98); }
        .settings-modal .theme-btn{ min-width: 110px; }
        .settings-modal.open{ box-shadow: 0 52px 120px rgba(2,6,23,0.95); border-color: rgba(124,58,237,0.12); transform: translate(-50%,0) scale(1); }
        /* Floating settings button */
        .settings-floating{ box-shadow: 0 18px 48px rgba(7,9,29,0.65); border:1px solid rgba(124,58,237,0.1); background: linear-gradient(180deg,#071029,#041018); }
        .settings-floating:hover{ transform: translateY(-4px) scale(1.03); }
        .settings-floating:active{ transform: translateY(0) scale(.98); }
        .settings-modal.open{ box-shadow: 0 52px 120px rgba(2,6,23,0.95); border-color: rgba(124,58,237,0.12); transform: translate(-50%,0) scale(1); }
        .settings-row button, .theme-btn { transition: transform 180ms ease, box-shadow 220ms ease, background 160ms ease; }
        .settings-row button:hover, .theme-btn:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 18px 48px rgba(7,9,29,0.6); }
        .settings-row { padding: 0.4rem; border-radius: 8px; transition: background 180ms ease, box-shadow 180ms ease; }
        .settings-row:hover { background: rgba(255,255,255,0.02); box-shadow: 0 10px 30px rgba(2,6,23,0.6); }
        .settings-modal.open{ transform: translate(-50%,0); opacity:1; pointer-events:auto; max-height: 80vh; }
        /* Pin the close button to the top-right corner of the modal */
        .settings-close{
            position: absolute;
            top: 10px;
            right: 12px;
            background: rgba(255,255,255,0.02);
            color: #e6eefb;
            border: 1px solid rgba(255,255,255,0.04);
            padding: 6px 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 520ms ease, background 1000ms ease;
            z-index: 10100;
        }
        .settings-close:hover{ transform: translateY(-2px) scale(1.03); background: rgba(255,255,255,0.04); }

        /* Reduce motion helper */
        .reduce-motion .fade-section, .reduce-motion .star, .reduce-motion .nav-panel, .reduce-motion .nav-toggle { transition-duration: 0.01s !important; animation-duration: 0.01s !important; }

        /* Relativity/Absolute animation */
        #relativity-sign {
            display: inline-block;
            font-size: 1.7rem;
            transition: opacity 1.2s cubic-bezier(.4, 0, .2, 1);
            opacity: 1;
        }

        #relativity-sign.hide {
            opacity: 0;
        }

        /* Remove gradient hover effect for Spacetime name */
        .cursive-title {
            font-family: 'Dancing Script', cursive;
            /* Remove gradient and transitions */
            color: #a78bfa;
        }

        /* Custom cool scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px;
            background: #18181b;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #a78bfa 0%, #38bdf8 50%, #34d399 100%);
            border-radius: 6px;
            border: 2px solid #18181b;
            box-shadow: 0 0 8px #a78bfa88;
            transition: background 0.5s ease, box-shadow 0.5s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #f472b6 0%, #a78bfa 50%, #fbbf24 100%);
            box-shadow: 0 0 12px #f472b688;
            cursor: grabbing;
        }

        ::-webkit-scrollbar-track {
            background: #18181b;
            border-radius: 6px;
        }

        /* For Firefox */
        html {
            scrollbar-width: thin;
            scrollbar-color: #a78bfa #18181b;
        }

        b {
            color: #ff8ac7;
            font-weight: bold;
            text-transform: capitalize;
            text-shadow: 0 0 1px #ff8ac7, 0 0 5px #ff8ac7;
            transition: color 1.2s ease-in-out, text-shadow 0.8s ease-in-out, transform 0.5s ease;
        }

        b:hover {
            color: #f5e8f1;
            text-shadow: 0 0 2px #ff8ac7, 0 0 8px #ff8ac7;
            cursor: help;
        }

        i {
            color: #a0ddc6;
            font-style: italic;
            text-shadow: 0 0 1px #34d399, 0 0 5px #34d399;
            transition: color 1.2s ease-in-out, text-shadow 0.8s ease-in-out;
        }

        i:hover {
            color: #e0f7f4;
            text-shadow: 0 0 2px #34d399, 0 0 8px #34d399;
        }

        strong {
            opacity: 0.01;
            transition: color 1.2s ease-in-out, text-shadow 0.8s ease-in-out, transform 0.5s ease, opacity 3s ease;
        }

        strong:hover {

            opacity: 1;
        }

        img {
            transition: box-shadow 3s cubic-bezier(.4, 0, .2, 1), border-color 0.7s cubic-bezier(.4, 0, .2, 1), transform 0.5s cubic-bezier(.4, 0, .2, 1);
        }

        img:hover {
            box-shadow: 0 0 32px 8px #a78bfa, 0 0 50px 20px #38bdf8, 0 0 80px 32px #34d399;
            border-color: #fbbf24;
            cursor: zoom-in;
            transform: scale3d(1.04, 1.04, 1.04);
        }

        a {
            text-decoration: none;
            color: #38bdf8;
            font-weight: 600;
            transition: color 0.8s ease-in-out, text-shadow 0.8s ease-in-out, transform 0.8s ease, scale 2s ease;
        }

        a:hover {
            text-shadow: 0 0 5px #34d399, 0 0 15px #f3f7f5;
            transform: translateY(-3px) scale(1.05);
            width: fit-content;
        }

        button {
            transition: background-color 0.7s ease, box-shadow 0.5s ease, transform 0.3s ease;
        }

        button:hover {
            background-color: #f472b6;
            box-shadow: 0 0 12px #f472b6;
            transform: translateY(-3px);
            cursor: pointer;
        }

        iframe {
            border-radius: 12px;
            transition: box-shadow 5s ease, border-color 0.7s ease, transform 0.5s ease;
        }

        iframe:hover {
            box-shadow: 0 0 32px 8px #a78bfa, 0 0 50px 20px #38bdf8, 0 0 60px 32px #34d399;
            border-color: #fbbf24;
            transform: scale3d(1.04, 1.04, 1.04);
            cursor: zoom-in;
        }

        p {
            color: #e0e0e0;
        }

        /* Equation bar for clear display */
        /* MathJax and TeX rendering: use the site fonts for equations */
        .MathJax, .mjx-chtml, .math-display, .eq-tex {
            font-family: 'Inter', 'Poppins', sans-serif !important;
            color: #e6eefb;
        }
        .math-display {
            display: block;
            text-align: center;
            width: 100%;
            margin: 0.75rem 0;
        }

        .equation-bar {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            background: linear-gradient(180deg, rgba(167, 139, 250, 0.06), rgba(56, 189, 248, 0.03));
            border: 1px solid rgba(167, 139, 250, 0.14);
            box-shadow: 0 6px 30px rgba(16, 10, 30, 0.6);
            padding: 0.75rem 1rem;
            border-radius: 12px;
            margin: 1rem 0 1.5rem;
            color: #e6eefb;
            transition: box-shadow 1s ease;
        }

        .equation-bar:hover {
            box-shadow: 0 8px 40px rgba(137, 100, 223, 2);

        }

        .equation-bar .quantities {
            flex: 1 1 55%;
            min-width: 240px;
            list-style: none;
            padding-left: 0.6rem;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .equation-bar .quantities li {
            margin: 0;
            padding: 0.15rem 0.25rem;
            line-height: 1.2;
        }

        .equation-bar .equation {
            flex: 1 1 40%;
            min-width: 240px;
            text-align: left;
            font-size: large;
            padding: 0;
            margin: 0;
        }

        .equation-bar .equation .eq-tex {
            display: block;
            font-size: 1.35rem;
            font-weight: 700;
            color: #f3f4ff;
            margin: 0;
            padding: 0;
            line-height: 1.15;
        }

        .symbol {
            border-bottom: .5px dashed #ba8c18;
            cursor: help;
            transition: color 0.8s ease-in-out, border-bottom 5s ease-in-out;
        }

        .symbol:hover {
            border-bottom: 1px solid #fbbf24;
        }

        /* small screens: stack nicely */
        @media (max-width: 720px) {
            .equation-bar {
                flex-direction: column;
                gap: 0.75rem;
            }

            .equation-bar .equation,
            .equation-bar .quantities {
                flex: 1 1 100%;
                min-width: unset;
            }

            .equation-bar .equation .eq-tex {
                font-size: 1.6rem;
                text-align: center;
                width: 100%;
                display: block;
            }
        }

        /* Floating tooltip for quantities (insert into existing <style>) */
        .tooltip-floating {
            position: fixed;
            z-index: 1000000;
            background: linear-gradient(180deg, rgba(8,9,20,0.9), rgba(12,10,24,0.82));
            color: #e6eefb;
            padding: 12px 16px;
            border-radius: 12px;
            border: 1px solid rgba(167,139,250,0.12);
            box-shadow: 0 10px 40px rgba(2, 6, 23, 0.9), 0 6px 18px rgba(124,58,237,0.06), inset 0 1px 0 rgba(255,255,255,0.02);
            backdrop-filter: blur(8px) saturate(1.05);
            -webkit-backdrop-filter: blur(8px) saturate(1.05);
            max-width: 380px;
            font-size: 0.96rem;
            pointer-events: none;
            opacity: 0;
            transform: translateY(8px) scale(0.98);
            transition: opacity 220ms cubic-bezier(.4, 0, .2, 1), transform 240ms cubic-bezier(.4, 0, .2, 1), box-shadow 300ms ease;
            line-height: 1.4;
        }

        .tooltip-floating.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            box-shadow: 0 18px 60px rgba(2, 6, 23, 0.98), 0 10px 30px rgba(124,58,237,0.12), inset 0 1px 0 rgba(255,255,255,0.02);
        }

        .tooltip-floating::after {
            /* small pointer */
            content: '';
            position: absolute;
            left: 14px;
            top: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: transparent transparent rgba(18,15,32,0.95) transparent;
            filter: drop-shadow(0 -2px 3px rgba(0,0,0,0.45));
        }

        .tooltip-floating .title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: #fbbf24;
            margin-bottom: 6px;
            letter-spacing: 0.01em;
            font-family: 'Poppins', Inter, sans-serif;
        }

        .tooltip-floating .title .title-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 7px;
            background: linear-gradient(90deg, rgba(167,139,250,0.12), rgba(56,189,248,0.06));
            color: #e9d5ff;
            box-shadow: 0 4px 12px rgba(124,58,237,0.06), inset 0 -1px 0 rgba(255,255,255,0.02);
            font-weight: 700;
            font-size: 0.85rem;
        }

        .tooltip-floating .body {
            color: #dbeafe;
            font-size: 0.95rem;
            max-height: 170px;
            overflow: auto;
            padding-right: 6px;
        }

        /* Slight highlight for the hovered quantity item */
        .equation-bar .quantities li:hover {
            background: rgba(193, 174, 249, 0.03);
            border-radius: 6px;
            transition: background 200ms ease;
        }
    </style>
</head>

<body>

    <!-- 3. Add the new fixed top-left title (hidden by default) just after <body> -->
    <h1 id="fixed-title"
        class="cursive-title text-purple-400 font-extrabold text-2xl fixed top-4 left-6 z-[9999] opacity-0 pointer-events-none transition-opacity duration-700">
        Spacetime
    </h1>

    <!-- Navigation Toggle & Panel (positioned bottom-right; moved from top) -->
    <nav id="nav-panel" class="nav-panel" aria-hidden="true" role="dialog" aria-modal="true">
        <button id="nav-close" class="nav-close" aria-label="Close navigation">✕</button>
        <ul class="nav-list" role="menu" aria-label="Main navigation">
            <!-- Links will be generated automatically from <main> sections -->
            <li class="nav-spacer" aria-hidden="true"></li>
        </ul>
        <!-- Pinned footer inside the panel (stays visible when nav list scrolls) -->
        <div class="nav-footer" aria-hidden="false">
            <button id="settings-toggle" type="button" class="settings-toggle settings-open compact-btn" aria-expanded="false" aria-controls="settings-modal">⚙ Settings</button>
        </div>
    </nav>
    <div id="nav-overlay" class="nav-overlay" aria-hidden="true"></div>

    <!-- Draggable Floating Settings Modal -->
    <div id="settings-modal" class="settings-modal" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="settings-header" id="settings-drag-handle">
            <strong>Settings</strong>
            <button id="settings-close" class="settings-close" aria-label="Close settings">✕</button>
        </div>
        <div class="settings-body">
            <div class="settings-section">
                <h4 style="margin:0 0 8px 0; color:#d7d7e6; font-size:0.95rem;">Visual</h4>
                <div class="settings-row">
                    <label style="width:140px;">Star Density</label>
                    <input id="star-density" type="range" min="50" max="600" value="150">
                </div>
                <div class="settings-row" style="align-items:center; gap:0.6rem;">
                    <label style="width:140px;"><input id="reduce-motion" type="checkbox"> Reduce Motion</label>
                </div>
                <div class="settings-row">
                    <label style="width:140px;">Animation Speed</label>
                    <input id="anim-speed" type="range" min="0.4" max="1.6" step="0.05" value="1">
                    <span id="anim-speed-label" style="margin-left:8px;color:#bfc7d9">1×</span>
                </div>
            </div>

            <div class="settings-section" style="margin-top:8px;">
                <h4 style="margin:0 0 8px 0; color:#d7d7e6; font-size:0.95rem;">Audio</h4>
                <div class="settings-row" style="align-items:center; gap:0.6rem;">
                    <button id="music-playpause" class="theme-btn">Play</button>
                    <label><input id="music-toggle" type="checkbox"> Background Music</label>
                </div>
                <div class="settings-row">
                    <label style="width:140px;">Music Volume</label>
                    <input id="music-volume" type="range" min="0" max="1" step="0.01" value="0.6">
                </div>
            </div>

            <div class="settings-section" style="margin-top:12px;">
                <h4 style="margin:0 0 8px 0; color:#d7d7e6; font-size:0.95rem;">Actions</h4>
                <div class="settings-row" style="display:flex; gap:0.6rem;">
                    <button id="reset-reveals" class="theme-btn">Reset Reveals</button>
                    <button id="reset-modal-pos" class="theme-btn">Reset Modal Position</button>
                    <button id="restore-defaults" class="theme-btn">Restore Defaults</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. Hero Section (To be scrolled past) -->
    <section id="hero-section" class="hero-space">

        <!-- Animated Starfield Background (Format Change) -->
        <div class="stars" id="starfield"></div>

        <!-- Hero Content (z-index 200 to ensure it's above stars) -->
        <div class="p-6 max-w-2xl relative z-20 mx-auto text-center pr-4">
            <p class="text-lg text-purple-400 mb-3 animate-pulse">
                <span id="relativity-sign">//Relative</span>
            </p>
            <h1 class="text-5xl sm:text-6xl md:text-[4rem] leading-tight"><span id="inline-title"
                    class="cursive-title text-purple-400 transition-opacity duration-700">Spacetime</span></h1>
            <h2
                class="text-4xl md:text-6xl font-black mb-6 leading-tight flex flex-wrap items-center justify-center gap-2">
                Grasp the <span class="text-purple-300">Fabric of Reality</span>
            </h2>
            <p class="text-lg text-gray-400">
                Explore Einstein's fundamental concept through interactive visualizations and engaging data models.
            </p>
            <a id="startLink" href="#main-content"
                class="inline-block mt-8 bg-purple-700 hover:bg-purple-800 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-xl shadow-purple-900/50">
                Begin Exploration
            </a>
        </div>
    </section>

    <!-- 3. Main Content (Appears when scrolled down) -->
    <main id="main-content" class="min-h-[200vh] p-8 md:p-16 bg-[#0c0a09] relative z-50">

        <!-- Feature 1a: What is Spacetime? -->
        <section id="section-1" data-nav="What is Spacetime?" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                What is Spacetime?
            </h3>
            <p>
                Spacetime is the <span class="symbol" data-desc-id="desc-foundation"><b>Foundation of the
                        Universe.</b></span> It is everything that exists, the stage and the flow at the same time. It
                has <i>four dimensions</i> — three of space <i>(x, y, and z axes)</i> and one of time <i>(t).</i>
            </p>
            <br>
            <div class="flex flex-col items-center relative group">
                <img src="https://www.shutterstock.com/shutterstock/videos/1062567853/thumb/12.jpg?ip=x480"
                    alt="Spacetime 3D Visualization"
                    class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />

                <p class="text-gray-400 text-base text-center max-w-lg">
                    A visual representation of spacetime curvature: massive objects like the sun bend the fabric of
                    space around them, creating gravity wells.
                </p>
            </div>
            <p class="mt-6">
                Time is the <b>driving axis.</b> Its flow gives the universe direction, <i>carrying reality from past to
                    future.</i> As time moves forward, the universe unfolds and expansion takes place.(Not the cause for
                it) The growth of the time axis is what makes everything evolve and change.
            </p>
            <br><br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 gap-bottom-5 fade-section">
                <div class="flex flex-col items-center relative group">
                    <img src="https://cosmosatyourdoorstep.com/wp-content/uploads/2017/09/1000_f_484306188_nk7q2c6sbjimen6gjxzwhmxgrw8j83c3.jpg"
                        alt="Gravitational Waves in Spacetime"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover"
                        style="max-width: 480px;" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Bend in spacetime caused by gravitational waves, rippling through the fabric of the universe.
                    </p>
                </div>

                <div>
                    <p class="mt-6">
                        Space forms the <span class="symbol" data-desc-id="desc-structural-part"><i> structural part of
                                spacetime.</i></span> The three dimensions — x, y, and z — provide the framework within
                        which events happen. Together with the time axis, they create the full fabric of the universe.
                    </p>

                    <p class="mt-6">
                        Curvature in spacetime arises when the flow of time is not uniform. Where time slows or shifts,
                        spacetime bends. This bending defines the shape and behavior of reality, as all things exist
                        within the fabric of spacetime.
                    </p>
                </div>
            </div>
        </section>
        <!-- Feature 1b: Bending of Spacetime (Gravity and Mass) -->
        <section id="section-2" data-nav="How Does Spacetime Bend?" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                How Does Spacetime Bend?
            </h3>
            <p>
                It's <span class="symbol" data-desc-id="desc-gravity"><b>Gravity</b></span> that causes spacetime to
                bend, but it's important to understand the relationship precisely.
                <br><br>

                Mass is simply a <b>concentrated</b> form of energy, and it's the presence of this mass-energy that
                curves spacetime. All forms of energy, including immense <i><span class="symbol"
                        data-desc-id="desc-kinetic-energy">kinetic energy</span>, internal energy (like <span
                        class="symbol" data-desc-id="desc-nuclear-energy">nuclear energy</span> ), and <span
                        class="symbol" data-desc-id="desc-cosmic-radiation">cosmic radiation</span></i>, are capable of
                warping this four-dimensional fabric.
                <br><br>
                In this context, gravity isn't a force; it is the curvature of spacetime. The denser an object is, the
                greater its concentration of energy, and thus the more it bends spacetime. This effect is most notable
                around large objects like planets, stars, and black holes. <br><br>

            </p>
            <br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 gap-bottom-5 fade-section">
                <div class="flex flex-col items-center relative group">
                    <img src="https://bigthink.com/wp-content/uploads/2021/11/ezgif-5-014fc9ef71.gif?resize=640,640"
                        alt="3D representation of spacetime"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover"
                        style="max-width: 480px;" />

                    <p class="text-gray-400 text-base text-center max-w-lg">
                        3D representation of spacetime which is bending due to the presence of moving mass.
                    </p>
                </div>

                <div class="flex flex-col items-center relative group"> <br>
                    <img src="https://platform.vox.com/wp-content/uploads/sites/2/chorus/uploads/chorus_asset/file/16024953/blackhole_gif.gif?quality=90&strip=all&crop=7.7857142857143%2C0%2C84.428571428571%2C100&w=750"
                        alt="Spacetime Bending Visualization"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Visualization: Black holes create extreme curvature in spacetime, leading to phenomena like
                        <i>gravitational lensing</i>.
                    </p>
                </div>
            </div>
        </section>
        <!-- section 3-->
        <section id="section-3" data-nav="How Does Spacetime Stretch?" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                How Does Spacetime Stretch?
            </h3>
            <p class="text-white-400 mb-6">
                The expansion of the universe—the large-scale "stretching" of spacetime—is driven by a different,
                mysterious component called <span class="symbol" data-desc-id="desc-dark-energy"><b>dark
                        energy</b></span>.
            </p>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 gap-bottom-5 fade-section">
                <div>
                    <br>
                    <p class="text-white-400 mb-6">
                        Dark energy acts opposite to gravity and all other known attractive energy. It is a
                        <i>repulsive</i> energy that tries to push matter apart, causing the universe to expand. <b>The
                            universe is the total volume of spacetime</b>; therefore, every stretch of spacetime means
                        the <i>universe expands</i>.

                    </p>
                    <p class="text-white-400 mb-6">
                        Since the universe is expanding, <i>time flows forward</i>. So, in short, dark energy makes
                        spacetime expand, which causes time to flow forward. The more rapidly the universe expands, the
                        more quickly time seems to flow.

                    </p>
                </div>

                <div class="flex flex-col items-center relative group">


                    <img src="https://news.ucsc.edu/wp-content/uploads/2025/07/Dark-matter-origin-horizon.jpg"
                        alt="History of the Universe"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />

                    <p class="text-gray-400 text-base text-center max-w-lg">
                        The history of the universe from the <span class="symbol" data-desc-id="desc-big-bang"><i>Big
                                Bang</i></span> to today, illustrating the expansion of spacetime over billions of years
                        due to dark energy.
                    </p>

                </div>
            </div>
        </section>
        <!-- section 4-->
        <section id="section-4" data-nav="Spacetime & Matter" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Spacetime & Matter <strong>(Spacetime without time)</strong>
            </h3>
            <p class="text-white-400 mb-6">
                Matter is created when spacetime bends to an extreme. In this state, <i>the flow of time slows down
                    almost to zero.</i> Matter can therefore be understood as spacetime without flowing time (Only
                Space; x,y and z) — <b>the still form of energy.</b>.
            </p><br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 gap-bottom-5 fade-section">
                <div class="flex flex-col items-center relative group">
                    <img src="https://i.extremetech.com/imagery/content-types/06xm9TS6pXwneMhnXaQGrDl/hero-image.fit_lim.size_1600x900.v1715953356.jpg"
                        alt="Spacetime 3D Visualization"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />

                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Matter the frozen form of energy, where time nearly stops due to extreme spacetime curvature.
                    </p>
                </div>
                <div>

                    <p class="text-white-400 mb-6">
                        When a huge amount of energy is confined to a small region <i>(compressed within limited x, y,
                            and z space)</i>, the time axis inside that region drops. The stronger the bending of time,
                        the denser the matter becomes. Electrons, protons, neutrons, quarks, and other fundamental
                        particles each represent <i>different stable patterns</i> of this extreme spacetime curvature.
                    </p>

                    <p class="text-white-400 mb-6">
                        Every object in the universe holds energy, and <b>nature tends toward stability.</b> Matter,
                        being a <i>reservoir</i> of immense energy locked in frozen time, constantly seeks to release
                        it. This <i>imbalance</i> creates a mismatch of <b>timeflow</b> between matter and its
                        surroundings. That mismatch is what we observe as <b>Gravity</b> — not a force of space, but the
                        effect of differing time rates.
                    </p>
                </div>
            </div>
            <p class="text-white-400 mb-6">
                As timeflow becomes weaker and curvature sharper, matter grows denser. At extreme limits, where <i>time
                    nearly stops</i>, black holes form. And when curvature <i>tends to infinity</i>, timeflow halts
                completely — producing the concept of a <span class="symbol"
                    data-desc-id="desc-singularity"><b>singularity</b></span>.
            </p>
        </section>

        <section id="section-8" data-nav="Spacetime & Dark Energy" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Spacetime & Dark Energy <strong>(Spacetime with excessive time)</strong>
            </h3>
            <br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
                <div>
                    <p class="text-white-400 mb-6">
                        <i>Dark energy</i> is the opposite state of matter in the language of spacetime and timeflow.
                    </p>

                    <p class="text-white-400 mb-6">In this view, <b>matter</b> is <i>spacetime with nearly frozen
                            timeflow</i> — regions where the local rate of time is close to zero. Matter holds enormous
                        energy in a still form.</p>

                    <p class="text-white-400 mb-6">By contrast, <b>dark energy</b> is <i>spacetime where timeflow is
                            extremely high</i>. These regions push spacetime outward — time races forward and carries
                        space with it, producing accelerated expansion.</p>

                </div>
                <div class="flex flex-col items-center relative group">
                    <img src="https://bigthink.com/wp-content/uploads/2024/01/darken.jpg?lb=1536,864"
                        alt="History of the Universe"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Percentage of dark energy in the universe over time, showing its increasing dominance in cosmic
                        expansion.
                    </p>
                </div>
            </div>
            <p class="text-white-400 mb-6">
                Dark energy acts as a <i>repulsive energy</i> that pushes matter away from one another, opposing the
                attractive nature of gravity. It stretches the fabric of spacetime, increasing the distance between
                galaxies and accelerating the universe’s expansion. This mysterious form of energy does not behave like
                matter, radiation, or any known force — it is a distinct and unique property of the universe itself,
                influencing the large-scale structure and evolution of everything that exists.
            </p>
            <p>Relation between <b>timeflow</b> in matter and dark energy:</p>
            <p>\[
                T_{\text{matter}} \approx 0 \quad | \quad T_{\text{dark energy}} \gg 1
                \]</p>

            <p>Thus, the cosmic acceleration attributed to dark energy is not a separate substance but the natural
                behaviour of spacetime itself — where <i>timeflow increases</i>, space expands faster; where <i>timeflow
                    drops</i>, spacetime condenses into matter.</p>

            <p>In short: <b>matter = frozen spacetime</b>, <b>dark energy = hyperactive spacetime</b>.</p>
        </section>

        <section id="section-9" data-nav="Time" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Time <strong>Flow</strong>
            </h3>
            <p class="text-white-400 mb-6">
                Time is the dimension that keeps the <i>universe running</i>. It begins from 0 and can reach a maximum
                value, tmax, where tmax tends toward infinity. In the real universe of spacetime, <i>time cannot have
                    any negative value.</i>
            </p><br><br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">

                <div class="flex flex-col items-center relative group">
                    <img src="https://assets.science.nasa.gov/dynamicimage/assets/science/cds/general/images/2020/09/universe-history.png?w=6667&h=3750&fit=clip&crop=faces%2Cfocalpoint"
                        alt="History of the Universe"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Universe expansion due to timeflow and dark energy over billions of years.
                    </p>
                </div>
                <div>
                    <p class="text-white-400 mb-6">
                        However, time and timeflow are not the same. <b>Timeflow (T)</b> represents the change in time
                        within the universe. The value of timeflow can be any real number — positive, negative, or zero
                        (though negative timeflow has not been observed). Timeflow determines how quickly or slowly time
                        progresses at any region of space.
                    </p>
                    <p class="text-white-400 mb-6">
                        Timeflow is directly related to the rate of expansion of the universe. When timeflow is zero,
                        everything becomes still and no motion is possible. Timeflow becomes lower near regions of high
                        density or massive objects, approaches zero near singularities and black holes, and becomes
                        higher in interstellar voids where dark energy dominates.
                    </p>
                </div>
            </div>
            <p>Relation between <b>proper time</b> (\(\tau\)) and <b>universal time</b> (\(t\)):</p>
            <p>\[
                \frac{d\tau}{dt} = T(\mathbf{x}, t)
                \]</p>

            <p class="text-white-400 mb-6">
                The net timeflow of the universe is positive and greater than that experienced on Earth — this is why
                the universe continues to expand. Within our solar system, the average timeflow is around 1 second per 1
                second, where one second is defined as <i>9,192,631,770 cycles of the microwave radiation released
                    during a specific electron transition in a cesium-133 atom.</i>
            </p>
            <p class="text-white-400 mb-6">
                Every form of matter, from atoms to subatomic particles, contains time and timeflow values that are
                close to zero. This is why matter remains stable and motionless within itself, even as the rest of the
                universe continues to expand.
            </p>
        </section>

        <section id="section-10" data-nav="Time Dilatation" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Time Dilatation
            </h3>
            <p><b>Equation:</b></p>

            <div class="equation-bar fade-section">
                <div class="equation" aria-hidden="false">
                    <div class="eq-tex">
                        \[
                        \displaystyle \frac{d\tau}{dt} \;=\; T(\mathbf{x},t)
                        \]
                    </div>
                </div>

                <!-- RIGHT: symbols only (descriptions stored elsewhere or inline via data-tooltip-text) -->
                <ul class="quantities" aria-label="Equation quantities">
                    <li><span class="symbol" data-desc-id="desc-tau">τ = Proper time</span></li>
                    <li><span class="symbol" data-desc-id="desc-t">t = Universal time</span></li>
                    <li><span class="symbol" data-desc-id="desc-T">T(x,t) = Timeflow</span></li>
                </ul>
            </div>


            <p><b>Universal time</b> (<i>t</i>) is the average time throughout the universe.

                It is always increasing. In a small interval, <i>t′ = t + h</i> where <i>h ≪ t</i>.
                Hence, for practical reasoning, <i>t</i> can be considered almost constant as <i>t′</i> tends to
                <i>t</i>.</p>

            <div class="equation-bar fade-section">
                <div class="equation" aria-hidden="false">
                    <div class="eq-tex">
                        \[
                        v = \frac{s}{t}
                        \]
                    </div>
                </div>

                <ul class="quantities" aria-label="Equation quantities">
                    <li><span class="symbol" data-desc-id="desc-velocity">v = Velocity</span></li>
                    <li><span class="symbol" data-desc-id="desc-distance">s = Distance</span></li>
                    <li><span class="symbol" data-desc-id="desc-t">t = Universal time</span></li>
                </ul>


                <p>and since <i>t</i> and <i>τ</i> are connected through timeflow (<i>T</i>):</p>
                <div class="equation" aria-hidden="false">
                    <div class="eq-tex">
                        \[
                        v = \frac{sT}{\tau}
                        \]
                    </div>
                </div>
</div>
<div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
<div>
                <h3 class="text-lg font-semibold mt-6 mb-2">Relative Case</h3>
                <p>If <i>τ</i> is constant, then <br><p class="text-center"><b>t ∝ 1/T</b></p><br>
                    This means that in regions with higher <b>T</b>,
                    time will appear to move slower to the observer — because we experience time as <i>t</i>.
                    This is the <b>relative</b> perception of time.</p>
</div>
<div>
                <h3 class="text-lg font-semibold mt-6 mb-2">Real Case</h3>
                <p>If <i>t</i> is constant, then <p class="text-center"><b>τ ∝ T</b></p><br>
                    In regions with higher <b>T</b>, the proper time (<i>τ</i>) will increase more quickly
                    than universal time (<i>t</i>).
                    So, in a small span of universal time, a much greater amount of local time will pass.
                    This is the <span class="symbol" data-desc-id="desc-absolute"><b>absolute</b></span> interpretation — the true nature of time dilation in your model.</p>
</div>    </div>
        </section>
        <!-- Feature 2: Scroll-Driven Data Storytelling -->
        <section id="section-11" data-nav="Black Holes & Voids" class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
            <div>
                <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">Blackholes</h3>


                <p>
                    Black holes are the ultimate form of <i>frozen spacetime</i> — regions where the <b>timeflow</b>
                    (\(T\)) becomes almost zero. Inside and near a black hole, time slows drastically due to extreme
                    curvature. Matter is so dense that spacetime folds into itself, cutting off the normal flow of time.
                </p>

                <p>
                    At the event horizon, the timeflow for an external observer effectively stops:</p>
                <p>\[
                    T_{\text{black hole}} \to 0
                    \]</p>

                <p>Within the black hole, time no longer progresses — it reaches a state where spacetime becomes nearly
                    static. In this condition, all motion and change cease, and matter remains locked in a timeless
                    state. Black holes are therefore <i>points of complete spacetime collapse</i>, where the
                    <b>universal time</b> (\(t\)) still exists, but the <b>local timeflow</b> (\(T\)) does not.</p>
                <br><br><br>
                <div class="flex flex-col items-center relative group">
                    <img src="https://www.universetoday.com/article_images/bh_visualization_20250820_193402.jpg"
                        alt="History of the Universe"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Black hole
                    </p>
                </div>


            </div>

            <div>
                <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">Interstellar Voids</h3>
                <p>In contrast, interstellar voids represent the opposite extreme — vast regions of spacetime with
                    <i>very high timeflow</i> and <i>very low density</i>.</p>

                <p>Here, the curvature of spacetime is minimal, allowing time to move faster than average:</p>
                <p>\[
                    T_{\text{void}} \gg 1
                    \]</p>

                <p>These regions are dominated by <b>dark energy</b>. Since the timeflow is extremely high, spacetime
                    stretches outward rapidly, driving the universe’s expansion. Voids represent <i>hyperactive
                        spacetime</i>, while black holes represent <i>frozen spacetime</i>. The contrast between them
                    keeps the universe balanced — one side contracting, the other expanding — maintaining the cosmic
                    equilibrium.</p>
                <br>
                <div class="flex flex-col items-center relative group">
                    <img src="https://media.moddb.com/cache/images/games/1/56/55401/thumb_620x2000/5777652096_81738f0a53_o.jpg"
                        alt="History of the Universe"
                        class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                    <p class="text-gray-400 text-base text-center max-w-lg">
                        Intersteller voids
                    </p>
                </div>
            </div>
         </section>
        <section id="section-5" data-nav="Singularity" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">Singularity</h3>
            <p class="text-white-400 mb-6">Let's start simple: <b>What is density?</b></p>
 <div class="equation-bar fade-section">
                <div class="equation" aria-hidden="false">
                    <div class="math-display">
                <div class="equation">
                    <div class="eq-tex">\[
                    \rho = \frac{M}{V}
                    \]</div>
                </div>
            </div>
                </div>

                <!-- RIGHT: symbols only (descriptions stored elsewhere or inline via data-tooltip-text) -->
                <ul class="quantities" aria-label="Equation quantities">
                    <li><span class="symbol" data-desc-id="desc-ρ">ρ = density</span></li>
                    <li><span class="symbol" data-desc-id="desc-M">M = Mass</span></li>
                    <li><span class="symbol" data-desc-id="desc-V">V = Volume</span></li>
                </ul>
            </div>
            <br>
            
 <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
    <div>
            <p class="text-white-400 mb-6">
                <b>Density</b> ρ is formally defined as the <b>mass</b> M of a substance confined within a specific <b>volume</b> V. If you take a massive quantity of mass and compress it into a tiny, tiny spot (making V extremely small), that density becomes absolutely wild.
            </p>

            <p class="text-white-400 mb-6">
                When density gets huge, gravity gets strong. And as we know, strong gravity does two things: it radically warps space, and more importantly for our model, it <i>slams the brakes on timeflow</i> (reducing the local timeflow, T). High density equals very slow time.
            </p>

            <p class="text-white-400 mb-6">
                Now, we hit the theoretical wall: <b>"infinite density."</b> Can infinite density be achieved? Look, true mathematical infinity doesn't exist in our limited universe with its own physics.
            </p>

           
</div>
<div>
            <div class="flex flex-col items-center relative group">
                <img loading="lazy" src="https://bigthink.com/wp-content/uploads/2022/05/future_universe_300dpi-e1716333806201.jpg?lb=1536,864" 
                alt="Spacetime curvature leading to a singularity graph" class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                <p class="text-gray-400 text-base text-center max-w-lg">Graph of Mass and dark matter.</p>
            </div>
</div>
</div>
 <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
<div> 
              <div class="flex flex-col items-center relative group">
                <img loading="lazy" src="https://bigthink.com/wp-content/uploads/2021/10/https___blogs-images.forbes.com_startswithabang_files_2017_12_0_uI_GtoHyQfXNSmMH.jpg?resize=640,644" 
                alt="types of universe" class="rounded-xl shadow-lg border-4 border-purple-700 mb-6 w-full max-w-xl object-cover" />
                <p class="text-gray-400 text-base text-center max-w-lg">Different types of universe. My theory supports the last one.</p>
            </div>
</div>  
<div>
             <p class="text-white-400 mb-6">
                <b>Formalized Explanation of the Singularity:</b>
                A gravitational singularity is a region in spacetime where the density becomes so extremely high that the curvature of spacetime tends to infinity, causing the known laws of physics—specifically <b>General Relativity</b>—to fail and become non-predictive.
            </p>

            <p class="text-white-400 mb-6">
                But imagine squeezing every single bit of mass and energy the universe holds into a space so tiny it's almost a point. A point is small, sure, but the density achieved is so extreme—so impossibly high—that all our physics, everything we know, just <i>stops working</i>.
            </p>

            <p class="text-white-400 mb-6">
                <b>That moment of absolute breakdown is what we call a singularity.</b>
            </p>

            <p class="text-white-400 mb-6">
                This isn't just a fun thought experiment; this is what the entire universe was right before the Big Bang—at the literal beginning of time. In that unified state:
            </p>

            <ul class="mb-6">
                <li class="text-white-400"><b>Time couldn't flow</b> (Timeflow T tends to 0).</li>
                <li class="text-white-400">Space was at its <b>maximum compression</b> (a total physical zero point).</li>
                <li class="text-white-400">There was no dark energy yet, just <b>one incredibly dense, unified state</b> holding all the universe's attractive force within it.</li>
            </ul>

            </div>
</div>
<p class="text-white-400 mb-6">Think of it this way:</p>
            
            <blockquote class="note">
                All mass in the smallest possible space.<br>
                Or, all mass in the only state where <b>time simply does not exist.</b>
            </blockquote>

            <p class="text-white-400 mb-6">It's the ultimate frozen state of spacetime.</p>
        </section>
        <section id="section-6" data-nav="Additional notes" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Some unclear concepts (not completely and properly understood yet)
            </h3>
            <p class="text-white-400 mb-6">
                <b>1.</b>
                "The universe itself expands because the time axis expands. Space (x, y, z) follows this growth, but
                matter does not expand, because its internal time is nearly zero. Thus, matter exists as frozen
                spacetime within the flowing sea of expanding spacetime."
            </p>
            <p class="text-white-400 mb-6">
                <b>2.</b>
                Additionally, the expansion of the universe affects the wavelength of light traveling through spacetime.
                As spacetime stretches, the wavelength of light also stretches, leading to a phenomenon known as
                redshift. This effect is commonly observed in distant galaxies, where the light they emit appears
                shifted towards the red end of the spectrum due to the expansion of spacetime over vast distances.
            </p>
            <p class="text-white-400 mb-6">
                <b>3.</b>
                Universe is a <span class="symbol" data-desc-id="desc-disymmetrical"><b>Disymmetrical system</b></span> where two completely opposite quantities affect each other to
                keep the universe in motion.
            </p>
        </section>

        <section id="section-7" data-nav="Fun Videos" class="mb-24 fade-section">
            <h3 class="text-4xl font-bold text-white mb-6 border-b border-purple-700 pb-2">
                Become bored of reading?
            </h3>
            <p class="text-white-400 mb-6">
                Watch these videos on the concept of Spacetime for better understanding:
            </p><br>
            <div class="mb-24 grid grid-cols-1 md:grid-cols-2 gap-12 fade-section">
<!-- Video 1: What if we could see Spacetime? An immersive experience -->
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; max-height: 500px; border-radius: 12px; margin-bottom: 24px;">
                    <iframe src="https://www.youtube.com/embed/YNqTamaKMC8"
                        title="What if we could see Spacetime? An immersive experience" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    </iframe>
                </div>
                <p class="text-center text-gray-500 py-8 border-t border-gray-700"> “What if we could see Spacetime? An immersive experience”</p>

<!-- Video 2: I never understood why matter curves spacetime… -->

                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; border-radius: 12px;">
                    <iframe src="https://www.youtube.com/embed/qKZvAwcXceE" title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    </iframe>
                </div>

                <p class="text-center text-gray-500 py-8 border-t border-gray-700"> “I never understood why matter
                    curves spacetime… until now!”</p>
            </div>
        </section>
<section id="section-12" data-nav="Info" class="mb-24 fade-section">
        <footer class="text-center text-gray-500 py-8 border-t border-gray-700">
            Website designed and developed by <a href="mailto:88arnob88@gmail.com"
                class="text-blue-400 hover:underline font-medium">
                Deb Arnob Barai
            </a>.<br>
            Every thing that is mentioned here is my own way of defining spacetime and may contain some information
            which are different from the conventional understanding. <i>Its new, its logical and it is absolute.</i><br>
            &copy; 2025 Spacetime Exploration. All rights reserved.
        </footer>
        <footer class="text-gray-500 py-8 ">
            version 1.1.0 &#8226; Last updated: Jan 2026 &#8226;
            [Navigation Panel]
        </footer>
        </section>
        <!-- Nav toggle (moved to bottom-left) -->
        <button id="nav-toggle" class="fixed bottom-4 left-4 z-50 p-4 rounded-full bg-purple-700 hover:bg-purple-600 text-white shadow-2xl transition duration-300 transform" aria-label="Open navigation" aria-expanded="false">☰</button>
        <!-- (Settings opener lives in the nav panel footer now) -->
    </main>

    <!-- fullscreen image modal -->
    <div id="fullscreen-img-modal"
        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(20,16,36,0.97); z-index:999999; align-items:center; justify-content:center;">
        <button id="close-fullscreen-img"
            style="position:absolute; top:2rem; right:2rem; background:#a78bfa; color:#fff; font-size:1.5rem; border:none; border-radius:1.5rem; padding:0.5rem 1.5rem; cursor:pointer; box-shadow:0 0 12px #a78bfa; z-index:1000000;">
            ✕
        </button>
        <button id="zoom-in-img"
            style="position:absolute; bottom:2rem; left:2rem; background:#34d399; color:#fff; font-size:2rem; border:none; border-radius:1.5rem; padding:0.5rem 1.5rem; cursor:pointer; box-shadow:0 0 12px #34d399; z-index:1000000;">
            +
        </button>
        <button id="zoom-out-img"
            style="position:absolute; bottom:2rem; left:7rem; background:#38bdf8; color:#fff; font-size:2rem; border:none; border-radius:1.5rem; padding:0.5rem 1.5rem; cursor:pointer; box-shadow:0 0 12px #38bdf8; z-index:1000000;">
            –
        </button>
        <img id="fullscreen-img" src="" alt="Fullscreen"
            style="max-width:98vw; max-height:95vh; border-radius:1rem; box-shadow:0 0 40px #38bdf8; transition: transform 0.3s cubic-bezier(.4,0,.2,1); background:#18181b;" />
    </div>

    <audio id="backgroundAudio" src="soundtrack for Html (edited).mp3" preload="auto" loop muted></audio>

    <!-- descriptions for tooltop -->
    <div id="quantity-descriptions" style="display:none;">
        <div id="desc-tau">Local time of a place.</div>
        <div id="desc-t">Average/global time for the universe.(Constant) [The total age of the universe= 14B
            years(approx)]</div>
        <div id="desc-T">Local rate of change in proper time relative to universal time (varies with position and
            epoch).</div>
        <div id="desc-foundation">Every space and object in universe is spacetime.</div>
        <div id="desc-structural-part">The tangible and interactable part of spacetime.</div>
        <div id="desc-gravity">Gravity is the fundamental force of attraction between any two objects that have mass or
            energy</div>
        <div id="desc-kinetic-energy">Energy possessed by an object due to its motion.</div>
        <div id="desc-nuclear-energy">Energy stored in the nucleus of an atom, released during nuclear reactions.</div>
        <div id="desc-cosmic-radiation">Cosmic radiation is a stream of high-energy, charged particles, primarily
            protons and atomic nuclei, that originate from space.</div>
        <div id="desc-dark-energy">A mysterious form of energy that permeates all of space and tends to accelerate the
            expansion of the universe. Totally opposite quantity of gravity</div>
        <div id="desc-big-bang">The prevailing cosmological model explaining the origin of the universe from a
            singularity approximately 13.8 billion years ago.</div>
        <div id="desc-singularity">A point in spacetime where density becomes infinite, such as the center of a black
            hole. (but these two events are not the same)</div>
        <div id="desc-velocity">The speed of an object in a specific direction.</div>
        <div id="desc-distance">The total length of the path traveled by an object.</div>
        <div id="desc-ρ">Density is defined as mass per unit volume.</div>
        <div id="desc-M">Mass is a measure of the amount of matter in an object.</div>
        <div id="desc-V">Volume is the amount of three-dimensional space occupied by an object.</div>
        <div id="desc-absolute">Everything in this universe is absolute.</div>
        <div id="desc-disymmetrical">???</div>
    </div>
    <script>
        // Audio autoplay handling
        document.addEventListener('DOMContentLoaded', (event) => {
            const startLink = document.getElementById('startLink');
            const audio = document.getElementById('backgroundAudio');
            const musicIndicator = document.getElementById('music-indicator');

            const targetVolume = 0.35; // Background music volume (35%)
            const fadeDuration = 2500;  // 2.5 seconds fade-in

            // --- FADE IN LOGIC ---

            function fadeInVolume(audioElement, finalVolume, duration) {
                // Ensure volume is at zero before starting the fade
                audioElement.volume = 0;
                const steps = 60;
                const intervalTime = duration / steps;
                const volumeStep = finalVolume / steps;

                const fadeInterval = setInterval(() => {
                    if (audioElement.volume < finalVolume) {
                        audioElement.volume = Math.min(finalVolume, audioElement.volume + volumeStep);
                    } else {
                        clearInterval(fadeInterval);
                        audioElement.volume = finalVolume; // Ensure it hits the target exactly
                    }
                }, intervalTime);
            }

            // --- INITIAL CLICK HANDLER ---

            if (startLink && audio) {
                let explorationStarted = false;
                const startExplorationHandler = function (e) {
                    e.preventDefault();
                    if (explorationStarted) {
                        // already started: just scroll to main - don't retrigger audio logic
                        document.getElementById('main-content')?.scrollIntoView({ behavior: 'smooth' });
                        return;
                    }
                    explorationStarted = true;

                    // 1. Unmute and start music via central helper and fade in
                    try {
                        setMusicOn(true); // ensures central state is updated and indicator shown
                        fadeInVolume(audio, targetVolume, fadeDuration);
                        try { localStorage.setItem('musicOn', 'true'); const cb = document.getElementById('music-toggle'); if (cb) cb.checked = true; } catch (err) {}
                    } catch (err) {
                        // Fallback to direct play
                        audio.muted = false;
                        audio.play().catch(()=>{});
                    }

                    // 2. Keep the start link visible but update its visual state
                    startLink.classList.add('started');
                    startLink.setAttribute('aria-pressed', 'true');
                    startLink.textContent = 'Exploring';

                    // 3. Scroll to main content smoothly
                    document.getElementById('main-content')?.scrollIntoView({ behavior: 'smooth' });
                };

                // Attach handler even if there isn't a music indicator element
                startLink.addEventListener('click', startExplorationHandler);
            }

            // --- MUSIC TOGGLE HANDLER ---

            function updateMusicIndicator(state) {
                if (!musicIndicator) return;
                musicIndicator.innerHTML = '';
                const icon = document.createElement('i');
                icon.classList.add('w-5', 'h-5');
                if (state === 'playing') icon.setAttribute('data-lucide', 'volume-2'); else icon.setAttribute('data-lucide', 'volume-x');
                musicIndicator.appendChild(icon);
                lucide.createIcons();
            }



            // Initial icon setup (shows in Settings)
            updateMusicIndicator('paused');
        });


        document.addEventListener('DOMContentLoaded', () => {
            // --- STARFIELD GENERATION ---
            function randomBetween(a, b) {
                return a + Math.random() * (b - a);
            }
            function createStarfield(containerId, smallCount, mediumCount) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                // Small stars
                for (let i = 0; i < smallCount; i++) {
                    const star = document.createElement('span');
                    star.className = 'star';
                    star.style.top = randomBetween(0, 100) + 'vh';
                    star.style.left = randomBetween(0, 100) + 'vw';
                    // Random brightness
                    const brightness = randomBetween(0.3, 1);
                    star.style.opacity = brightness;
                    // Random animation delay and duration for slow, unique blinking
                    star.style.animationDelay = randomBetween(0, 5) + 's';
                    star.style.animationDuration = randomBetween(3.5, 7) + 's';
                    container.appendChild(star);
                }
                // Medium stars
                for (let i = 0; i < mediumCount; i++) {
                    const star = document.createElement('span');
                    star.className = 'star medium';
                    star.style.top = randomBetween(0, 100) + 'vh';
                    star.style.left = randomBetween(0, 100) + 'vw';
                    // Random brightness for medium stars too
                    const brightness = randomBetween(0.5, 1);
                    star.style.opacity = brightness;
                    star.style.animationDelay = randomBetween(0, 6) + 's';
                    star.style.animationDuration = randomBetween(4, 8) + 's';
                    container.appendChild(star);
                }
            }
            // Increase star count for richer field
            createStarfield('starfield', 120, 40);

            // --- EXISTING LOGIC ---
            const inlineTitle = document.getElementById('inline-title');
            const fixedTitle = document.getElementById('fixed-title');
            const trigger = document.getElementById('hero-section');
            function handleScroll() {
                const scrollY = window.scrollY;
                const triggerHeight = trigger.offsetHeight * 0.45;
                if (scrollY > triggerHeight) {
                    inlineTitle.style.opacity = '0';
                    fixedTitle.style.opacity = '1';
                } else {
                    inlineTitle.style.opacity = '1';
                    fixedTitle.style.opacity = '0';
                }
            }
            window.addEventListener('scroll', handleScroll);
            window.addEventListener('resize', handleScroll);
            handleScroll();

            // Smooth scroll for Begin Exploration button
            const btn = document.querySelector('a[href="#main-content"]');
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                document.getElementById('main-content').scrollIntoView({ behavior: 'smooth' });
            });

            // Relativity/Absolute animation
            const relativitySign = document.getElementById('relativity-sign');
            let showingRelative = true;
            setInterval(() => {
                relativitySign.classList.add('hide');
                setTimeout(() => {
                    showingRelative = !showingRelative;
                    relativitySign.textContent = showingRelative ? '//Relative' : '//Absolute';
                    relativitySign.classList.remove('hide');
                }, 1200);
            }, 3200);

            // Fade-in sections on scroll
            function revealSections() {
                document.querySelectorAll('.fade-section').forEach(section => {
                    const rect = section.getBoundingClientRect();
                    if (rect.top < window.innerHeight - 80) {
                        section.classList.add('visible');
                    }
                });
            }
            window.addEventListener('scroll', revealSections);
            window.addEventListener('resize', revealSections);
            revealSections();

            // Gradient hover effect for titles
            function addGradientHover(id) {
                const el = document.getElementById(id);
                if (!el) return;
                el.addEventListener('mouseenter', () => {
                    el.classList.add('hover-gradient');
                });
                el.addEventListener('mouseleave', () => {
                    el.classList.remove('hover-gradient');
                });
            }
            addGradientHover('inline-title');
            addGradientHover('fixed-title');

            // --- FULLSCREEN IMAGE VIEWER LOGIC ---
            const fullscreenImgModal = document.getElementById('fullscreen-img-modal');
            const fullscreenImg = document.getElementById('fullscreen-img');
            const closeFullscreenImgBtn = document.getElementById('close-fullscreen-img');
            const zoomInImgBtn = document.getElementById('zoom-in-img');
            const zoomOutImgBtn = document.getElementById('zoom-out-img');

            let currentScale = 1;
            const scaleStep = 0.1;

            // Function to open the fullscreen image modal
            function openFullscreenImg(src) {
                fullscreenImg.src = src;
                fullscreenImgModal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Prevent background scroll
            }

            // Event listener to close the modal
            closeFullscreenImgBtn.addEventListener('click', () => {
                fullscreenImgModal.style.display = 'none';
                document.body.style.overflow = ''; // Re-enable background scroll
            });

            // Close modal on clicking outside the image
            fullscreenImgModal.addEventListener('click', (e) => {
                if (e.target === fullscreenImgModal) {
                    fullscreenImgModal.style.display = 'none';
                    document.body.style.overflow = ''; // Re-enable background scroll
                }
            });

            // Zoom in and out functionality
            zoomInImgBtn.addEventListener('click', () => {
                currentScale += scaleStep;
                fullscreenImg.style.transform = `scale(${currentScale})`;
            });

            zoomOutImgBtn.addEventListener('click', () => {
                currentScale = Math.max(1, currentScale - scaleStep);
                fullscreenImg.style.transform = `scale(${currentScale})`;
            });

            // Attach open function to all images in the main content
            document.querySelectorAll('#main-content img').forEach(img => {
                img.addEventListener('click', () => {
                    const src = img.src.replace(/thumb\/\d+x\d+\//, ''); // Remove thumbnail size part
                    openFullscreenImg(src);
                });
            });
        });
        // Add this inside your DOMContentLoaded function
        const realitySpan = document.querySelector('.text-purple-300');
        const h2 = realitySpan.closest('h2');
        let realityTimeout = null;

        // Helper for smooth fade animation (restores transition after innerHTML change)
        function fadeText(element, newHTML, duration = 800) {
            element.style.transition = `opacity ${duration}ms cubic-bezier(.4,0,.2,1)`;
            element.style.opacity = 0;
            setTimeout(() => {
                element.innerHTML = newHTML;
                // Force reflow to ensure transition applies after innerHTML change
                void element.offsetWidth;
                element.style.transition = `opacity ${duration}ms cubic-bezier(.4,0,.2,1)`;
                element.style.opacity = 1;
            }, duration);
        }

        realitySpan.addEventListener('mouseenter', () => {
            realityTimeout = setTimeout(() => {
                fadeText(h2, '<span class="inter text-white-400">Spacetime is the Universe</span>');
            }, 10000); // 10 seconds
        });

        realitySpan.addEventListener('mouseleave', () => {
            clearTimeout(realityTimeout);
            // Only fade back if not already normal
            if (!h2.innerHTML.includes('Grasp')) {
                fadeText(h2, `Grasp the <span class="text-purple-300">Fabric of Reality</span>`);
            }
        });
        /* Floating tooltip — now general purpose:
           - Any element with data-tooltip-text="..." shows that text.
           - Any element with data-desc-id="some-id" will use the content of the element with that id.
           - Works for inline words (not only li). */
        document.addEventListener('DOMContentLoaded', () => {
            // create tooltip node once
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip-floating';
            tooltip.innerHTML = '<div class="title"></div><div class="body"></div>';
            document.body.appendChild(tooltip);

            // selector for the elements that should show tooltips
            const selector = '[data-tooltip-text], [data-desc-id], [data-tooltip]';
            const tipElements = document.querySelectorAll(selector);

            function getTooltipText(el) {
                // priority: explicit text attribute -> desc-id lookup -> fallback to element title/aria-label
                const txt = el.getAttribute('data-tooltip-text');
                if (txt) return txt;
                const descId = el.getAttribute('data-desc-id');
                if (descId) {
                    const src = document.getElementById(descId);
                    if (src) return src.textContent.trim();
                }
                const direct = el.getAttribute('data-tooltip');
                if (direct) return direct;
                return el.getAttribute('title') || el.getAttribute('aria-label') || '';
            }

            function positionTooltip(e) {
                const rect = tooltip.getBoundingClientRect();
                const mouseX = (e.clientX || (e.touches && e.touches[0].clientX)) || (window.innerWidth / 2);
                const mouseY = (e.clientY || (e.touches && e.touches[0].clientY)) || (window.innerHeight / 2);
                const pad = 12;

                let left = mouseX + pad;
                let top = mouseY + pad;

                if (left + rect.width > window.innerWidth - 12) left = mouseX - rect.width - pad;
                if (top + rect.height > window.innerHeight - 12) top = mouseY - rect.height - pad;
                left = Math.max(8, left);
                top = Math.max(8, top);

                tooltip.style.left = left + 'px';
                tooltip.style.top = top + 'px';
            }

            tipElements.forEach(el => {
                // show on enter
                el.addEventListener('mouseenter', (e) => {
                    const txt = getTooltipText(el);
                    if (!txt) return;
                    tooltip.querySelector('.title').textContent = el.textContent.trim(); // small title = the word
                    tooltip.querySelector('.body').textContent = txt;
                    tooltip.classList.add('visible');
                    positionTooltip(e);
                });
                // follow cursor
                el.addEventListener('mousemove', (e) => positionTooltip(e));
                // hide on leave
                el.addEventListener('mouseleave', () => tooltip.classList.remove('visible'));

                // touch fallback: tap toggles tooltip
                el.addEventListener('click', (e) => {
                    if (window.innerWidth < 900) {
                        e.preventDefault();
                        const visible = tooltip.classList.contains('visible');
                        if (visible) tooltip.classList.remove('visible');
                        else {
                            const txt = getTooltipText(el);
                            if (!txt) return;
                            tooltip.querySelector('.title').textContent = el.textContent.trim();
                            tooltip.querySelector('.body').textContent = txt;
                            tooltip.classList.add('visible');
                            positionTooltip(e);
                        }
                    }
                });
            });

            // hide on scroll/resize
            window.addEventListener('scroll', () => tooltip.classList.remove('visible'), { passive: true });
            window.addEventListener('resize', () => tooltip.classList.remove('visible'));
        });
    </script>
    <script>
    // Added features: nav panel, settings, star density, music controls, fade-reset
    document.addEventListener('DOMContentLoaded', () => {
        // --- Navigation panel ---
        const navToggle = document.getElementById('nav-toggle');
        const navPanel = document.getElementById('nav-panel');
        const navClose = document.getElementById('nav-close');
        const navOverlay = document.getElementById('nav-overlay');
        let navLinks = [];

        const navItems = Array.from(document.querySelectorAll('.nav-list > li'));

        // Build nav from sections automatically and watch for changes
        function buildNav(){
            const navList = document.querySelector('.nav-list');
            const spacer = navList.querySelector('.nav-spacer');
            const settingsItem = navList.querySelector('.nav-settings');
            // remove existing generated links
            navList.querySelectorAll('li.generated').forEach(n => n.remove());
            // find sections in main and create links
            const sections = Array.from(document.querySelectorAll('main section'));
            sections.forEach((sec, i) => {
                const title = sec.dataset.nav || sec.querySelector('h2, h3')?.innerText?.trim() || sec.id || ('section-' + (i+1));
                const id = sec.id || ('section-auto-' + (i+1));
                if (!sec.id) sec.id = id;
                const li = document.createElement('li'); li.classList.add('generated');
                const a = document.createElement('a'); a.className = 'nav-link'; a.href = '#' + sec.id; a.textContent = title;
                a.addEventListener('click', (e)=>{ e.preventDefault(); closeNav(); setTimeout(()=>document.getElementById(sec.id).scrollIntoView({behavior:'smooth', block:'start'}), 300); });
                li.style.setProperty('--i', i);
                li.appendChild(a);
                navList.insertBefore(li, spacer);
            });
            navLinks = Array.from(document.querySelectorAll('.nav-link'));
        }
        // run at start
        buildNav();
        // watch for added sections
        const observerSections = new MutationObserver((mutations)=>{ buildNav(); });
        observerSections.observe(document.querySelector('main'), { childList: true, subtree: true });
        // Open the navigation panel (improved)
        function openNav() {
            navItems.forEach((li, i) => li.style.setProperty('--i', i));
            navPanel.classList.remove('closing');
            navPanel.classList.add('open');
            navOverlay.classList.add('visible');
            navToggle.classList.add('hidden');
            navToggle.classList.add('open');
            navToggle.setAttribute('aria-expanded', 'true');
            navPanel.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            const focusable = navPanel.querySelectorAll('a,button,input,select,textarea');
            if (focusable && focusable.length) focusable[0].focus();
        }

        // Close the navigation panel (animated)
        function closeNav() {
            // trigger closing animation and wait for it to finish using animationend when possible
            navPanel.classList.add('closing');
            navOverlay.classList.remove('visible');
            navToggle.classList.remove('open');
            navToggle.classList.remove('hidden');
            navToggle.setAttribute('aria-expanded', 'false');
            navPanel.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            const onNavAnimEnd = (e) => {
                if (e.target !== navPanel) return;
                navPanel.classList.remove('open');
                navPanel.classList.remove('closing');
                navPanel.removeEventListener('animationend', onNavAnimEnd);
                navToggle.focus();
            };
            navPanel.addEventListener('animationend', onNavAnimEnd);
            // fallback in case animationend doesn't fire
            setTimeout(()=>{ try{ navPanel.classList.remove('open'); navPanel.classList.remove('closing'); navToggle.focus(); }catch(e){} }, 700);
            if (settingsModal.classList.contains('open')) {
                closeSettings();
            }
        }

        // Toggle handler on the top-left button
        navToggle.addEventListener('click', () => {
            if (navPanel.classList.contains('open')) closeNav(); else openNav();
        });

        // Close triggers
        navClose.addEventListener('click', closeNav);
        navOverlay.addEventListener('click', closeNav);

        // Smooth scroll: close panel then scroll to target (with slight delay for animation)
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (!href || !href.startsWith('#')) return;
                const target = document.querySelector(href);
                if (target) {
                    e.preventDefault();
                    closeNav();
                    // allow panel close animation to finish before scrolling
                    setTimeout(() => target.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
                }
            });
        });

        // Accessibility: close on Escape and trap Tab focus inside the panel (and settings)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (settingsModal.classList.contains('open')) { closeSettings(); return; }
                if (navPanel.classList.contains('open')) closeNav();
            }

            if (e.key === 'Tab' && navPanel.classList.contains('open')) {
                const focusable = Array.from(navPanel.querySelectorAll('a,button,input,select,textarea')).filter(el => !el.hasAttribute('disabled'));
                if (!focusable.length) return;
                const first = focusable[0];
                const last = focusable[focusable.length - 1];
                if (e.shiftKey && document.activeElement === first) {
                    e.preventDefault();
                    last.focus();
                } else if (!e.shiftKey && document.activeElement === last) {
                    e.preventDefault();
                    first.focus();
                }
            }
        });

        // --- Settings modal ---
        const settingsToggle = document.getElementById('settings-toggle');
        const settingsModal = document.getElementById('settings-modal');
        const settingsClose = document.getElementById('settings-close');
        const settingsDragHandle = document.getElementById('settings-drag-handle');

        function openSettings(){
            // restore default centered position (in case it was dragged off-screen)
            settingsModal.style.left = '';
            settingsModal.style.top = '';
            settingsModal.style.transform = 'translate(-50%,-10%)';
            settingsModal.classList.add('open');
            settingsModal.setAttribute('aria-hidden','false');
            const toggleBtn = document.getElementById('settings-toggle') || document.querySelector('.settings-open');
            if (toggleBtn) toggleBtn.setAttribute('aria-expanded','true');
            // ensure it sits above overlays and the nav panel
            settingsModal.style.zIndex = '100500';
            // force visible as a fallback in case CSS rules are overridden
            settingsModal.style.maxHeight = '80vh';
            settingsModal.style.opacity = '1';
            settingsModal.style.pointerEvents = 'auto';
            setTimeout(()=> settingsModal.querySelector('input,button,select')?.focus(), 120);
        }
        function closeSettings(){
            settingsModal.classList.remove('open');
            settingsModal.setAttribute('aria-hidden','true');
            const toggleBtn = document.getElementById('settings-toggle') || document.querySelector('.settings-open');
            if (toggleBtn) toggleBtn.setAttribute('aria-expanded','false');
            // cleanup inline styles we may have set when opening
            settingsModal.style.zIndex = '';
            settingsModal.style.maxHeight = '';
            settingsModal.style.opacity = '';
            settingsModal.style.pointerEvents = '';
        }

        settingsToggle?.addEventListener('click', (e)=>{ e.stopPropagation(); if (settingsModal.classList.contains('open')) closeSettings(); else openSettings(); });
        settingsClose?.addEventListener('pointerdown', (e)=>e.stopPropagation());
        settingsClose?.addEventListener('click', (e)=>{ e.stopPropagation(); closeSettings(); });

        document.addEventListener('click', (e)=>{
            if (settingsModal.classList.contains('open') && !settingsModal.contains(e.target) && e.target !== settingsToggle) closeSettings();
        });

        document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') { if (settingsModal.classList.contains('open')) { closeSettings(); return; } if (navPanel.classList.contains('open')) closeNav(); } });

        // Dragging the settings modal (pointer events) — improved: movement threshold + disable on small screens + pointer capture + prevent selection
        let isPointerDown = false, isDragging = false, dragOffsetX = 0, dragOffsetY = 0, dragStartX = 0, dragStartY = 0;
        const DRAG_THRESHOLD = 6; // px
        settingsDragHandle?.addEventListener('pointerdown', (e) => {
            // Only enable dragging on medium+ screens to avoid interfering with mobile scrolling
            if (window.innerWidth <= 720) return;
            if (e.button && e.button !== 0) return;
            isPointerDown = true;
            dragStartX = e.clientX;
            dragStartY = e.clientY;
            // prepare for a possible drag
            settingsModal.style.transition = 'none';
            settingsDragHandle.setPointerCapture && settingsDragHandle.setPointerCapture(e.pointerId);
        });
        document.addEventListener('pointermove', (e) => {
            if (!isPointerDown) return;
            const dx = Math.abs(e.clientX - dragStartX);
            const dy = Math.abs(e.clientY - dragStartY);
            if (!isDragging) {
                // wait until movement exceeds threshold to start real dragging
                if (dx < DRAG_THRESHOLD && dy < DRAG_THRESHOLD) return;
                isDragging = true;
                settingsDragHandle.classList.add('dragging');
                const rect = settingsModal.getBoundingClientRect();
                dragOffsetX = e.clientX - rect.left;
                dragOffsetY = e.clientY - rect.top;
                // avoid text selection while dragging
                document.body.style.userSelect = 'none';
            }
            let left = e.clientX - dragOffsetX;
            let top = e.clientY - dragOffsetY;
            left = Math.max(8, Math.min(window.innerWidth - settingsModal.offsetWidth - 8, left));
            top = Math.max(8, Math.min(window.innerHeight - settingsModal.offsetHeight - 8, top));
            settingsModal.style.left = left + 'px';
            settingsModal.style.top = top + 'px';
            settingsModal.style.transform = 'none';
        }, { passive: true });
        document.addEventListener('pointerup', (e) => {
            if (!isPointerDown) return;
            isPointerDown = false;
            if (!isDragging) {
                // no actual drag happened
                settingsModal.style.transition = '';
                settingsDragHandle.releasePointerCapture && settingsDragHandle.releasePointerCapture(e.pointerId);
                return;
            }
            isDragging = false;
            settingsDragHandle.classList.remove('dragging');
            settingsModal.style.transition = '';
            document.body.style.userSelect = '';
            settingsDragHandle.releasePointerCapture && settingsDragHandle.releasePointerCapture(e.pointerId);
        });

        // --- Star density control ---
        const starField = document.getElementById('starfield');
        const starDensityInput = document.getElementById('star-density');
        function setStarCount(n){
            if (!starField) return;
            const existing = Array.from(starField.querySelectorAll('.star'));
            const cur = existing.length;
            if (cur < n) {
                for (let i=0;i<n-cur;i++){
                    const s = document.createElement('div'); s.className = 'star';
                    s.style.left = (Math.random()*100) + 'vw'; s.style.top = (Math.random()*100) + 'vh'; s.style.opacity = (0.4 + Math.random()*0.7).toString();
                    const size = Math.random() > 0.85 ? 3 : (Math.random() > 0.6 ? 2 : 1); s.style.width = size + 'px'; s.style.height = size + 'px';
                    starField.appendChild(s);
                }
            } else if (cur > n) {
                for (let i=0;i<cur-n;i++) existing[i].remove();
            }
        }
        if (starDensityInput) {
            starDensityInput.addEventListener('input', ()=>{ setStarCount(parseInt(starDensityInput.value,10)); localStorage.setItem('starDensity', starDensityInput.value); });
        }
        const savedStars = parseInt(localStorage.getItem('starDensity'), 10);
        setStarCount(!isNaN(savedStars) ? savedStars : (starDensityInput ? parseInt(starDensityInput.value,10) : 150));

        // --- Music controls ---
        const backgroundAudio = document.getElementById('backgroundAudio');
        const musicCheckbox = document.getElementById('music-toggle');
        const musicVol = document.getElementById('music-volume');

        function setMusicOn(on){ if (!backgroundAudio) return; if (on){ backgroundAudio.muted = false; backgroundAudio.play().catch(()=>{}); } else { backgroundAudio.pause(); backgroundAudio.muted = true; } localStorage.setItem('musicOn', on ? 'true' : 'false'); updateMusicIndicator(on ? 'playing' : 'paused'); }
        musicCheckbox?.addEventListener('change', ()=> setMusicOn(musicCheckbox.checked));
        musicVol?.addEventListener('input', ()=>{ if (backgroundAudio) backgroundAudio.volume = parseFloat(musicVol.value); localStorage.setItem('musicVolume', musicVol.value); });

        const savedMusic = localStorage.getItem('musicOn') === 'true'; const savedVol = parseFloat(localStorage.getItem('musicVolume'));
        if (!isNaN(savedVol) && backgroundAudio) backgroundAudio.volume = savedVol; if (musicVol && !isNaN(savedVol)) musicVol.value = savedVol;
        if (musicCheckbox) musicCheckbox.checked = savedMusic;
        // Do NOT auto-play on load. Keep audio paused & muted until the user initiates (click start) or scrolls into main content.
        if (backgroundAudio) { backgroundAudio.pause(); backgroundAudio.muted = true; updateMusicIndicator('paused'); }
        // Start music when user scrolls into the main content — only if the music toggle is enabled by user
        let musicAutoStarted = false;
        const mainEl = document.getElementById('main-content');
        if (mainEl) {
          const mainObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting && !musicAutoStarted) {
                musicAutoStarted = true;
                if (musicCheckbox && musicCheckbox.checked) setMusicOn(true);
                mainObserver.disconnect();
              }
            });
          }, { threshold: 0.08 });
          mainObserver.observe(mainEl);
        }


        // --- Scroll reveal observer + reset on reaching top ---
        const observerOptions = { threshold: 0.12 };
        const observer = new IntersectionObserver((entries)=>{ entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); }); }, observerOptions);
        document.querySelectorAll('.fade-section').forEach(el => { observer.observe(el); });

        let lastAtTop = window.scrollY <= 10;
        function resetRevealOnTop(){ const atTop = window.scrollY <= 10; if (atTop && !lastAtTop){ document.querySelectorAll('.fade-section.visible').forEach(el => { el.classList.remove('visible'); try{ observer.unobserve(el); }catch(e){} observer.observe(el); }); } lastAtTop = atTop; }
        window.addEventListener('scroll', ()=>{ if (window._resetRevealRAF) return; window._resetRevealRAF = true; requestAnimationFrame(()=>{ resetRevealOnTop(); window._resetRevealRAF = false; }); }, { passive: true });
        window.addEventListener('load', ()=> { lastAtTop = window.scrollY <= 10; });

        // Reset reveals button
        document.getElementById('reset-reveals')?.addEventListener('click', ()=>{ document.querySelectorAll('.fade-section.visible').forEach(el=>{ el.classList.remove('visible'); try{ observer.unobserve(el); }catch(e){} observer.observe(el); }); closeSettings(); });
        document.getElementById('reset-modal-pos')?.addEventListener('click', ()=>{ settingsModal.style.left = ''; settingsModal.style.top = ''; settingsModal.style.transform = 'translate(-50%,-10%)'; });

        // Wire additional settings controls (animation speed, reduce motion, restore defaults, music play/pause)
        const animSpeedInput = document.getElementById('anim-speed');
        const animSpeedLabel = document.getElementById('anim-speed-label');
        const reduceMotionCheckbox = document.getElementById('reduce-motion');
        const restoreDefaultsBtn = document.getElementById('restore-defaults');
        const musicPlayPause = document.getElementById('music-playpause');
        const settingsOpenBtns = Array.from(document.querySelectorAll('.settings-open'));

        // Open settings from compact footer button (direct call to openSettings)
        settingsOpenBtns.forEach(b => b.addEventListener('click', openSettings));

        // (floating settings button removed — nav footer opens the modal)


        // keep nav toggle interactions simple — no visual pop class required

        // Animation speed (multiplier) — updates CSS variables and persists
        const baseFade = 0.8; // seconds
        function applyAnimSpeed(mult){ const dur = (baseFade * parseFloat(mult)).toFixed(2) + 's'; document.documentElement.style.setProperty('--fade-duration', dur); document.documentElement.style.setProperty('--section-duration', dur); localStorage.setItem('animSpeed', mult); if (animSpeedLabel) animSpeedLabel.textContent = mult + '×'; }
        if (animSpeedInput){ animSpeedInput.addEventListener('input', ()=> applyAnimSpeed(animSpeedInput.value)); const savedAnim = localStorage.getItem('animSpeed') || '1'; animSpeedInput.value = savedAnim; applyAnimSpeed(savedAnim); }

        // Reduce motion
        if (reduceMotionCheckbox){ reduceMotionCheckbox.addEventListener('change', ()=>{ if (reduceMotionCheckbox.checked) document.documentElement.classList.add('reduce-motion'); else document.documentElement.classList.remove('reduce-motion'); localStorage.setItem('reduceMotion', reduceMotionCheckbox.checked ? 'true' : 'false'); }); const savedReduce = localStorage.getItem('reduceMotion') === 'true'; reduceMotionCheckbox.checked = savedReduce; if (savedReduce) document.documentElement.classList.add('reduce-motion'); }

        // Music play/pause (button), sync checkbox
        if (musicPlayPause){ musicPlayPause.addEventListener('click', ()=>{ const on = !(musicCheckbox && musicCheckbox.checked); if (musicCheckbox) musicCheckbox.checked = on; setMusicOn(on); musicPlayPause.textContent = on ? 'Pause' : 'Play'; }); }

        // Restore defaults
        if (restoreDefaultsBtn){ restoreDefaultsBtn.addEventListener('click', ()=>{
            // visuals
            if (starDensityInput) { starDensityInput.value = 150; setStarCount(150); localStorage.removeItem('starDensity'); }
            if (animSpeedInput) { animSpeedInput.value = 1; applyAnimSpeed('1'); localStorage.removeItem('animSpeed'); }
            // motion
            if (reduceMotionCheckbox) { reduceMotionCheckbox.checked = false; document.documentElement.classList.remove('reduce-motion'); localStorage.removeItem('reduceMotion'); }
            // audio
            if (musicVol) { musicVol.value = 0.6; if (backgroundAudio) backgroundAudio.volume = 0.6; localStorage.removeItem('musicVolume'); }
            if (musicCheckbox) { musicCheckbox.checked = false; setMusicOn(false); localStorage.removeItem('musicOn'); }
            closeSettings();
        }); }

        // Accessibility: also allow compact footer button to open settings via Enter/Space
        settingsOpenBtns.forEach(b => { b.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openSettings(); } }); });

        // Global music indicator helper (available to all scopes)
        function updateMusicIndicator(state) {
            const musicIndicator = document.getElementById('music-indicator');
            if (!musicIndicator) return;
            musicIndicator.innerHTML = '';
            const icon = document.createElement('i');
            icon.classList.add('w-5', 'h-5');
            if (state === 'playing') icon.setAttribute('data-lucide', 'volume-2'); else icon.setAttribute('data-lucide', 'volume-x');
            musicIndicator.appendChild(icon);
            lucide.createIcons();
        }
    });
    </script>
</body>

</html>
